{% extends 'shared/base.html' %}

{% block title %}
  Enregistrer Utilisateur
{% endblock %}

{% block extra_head %}
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <!-- Select2 -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
{% endblock %}

{% block content %}
  <div class="min-h-screen pt-20">
    <div class="flex flex-col justify-center items-center">
      <div class="lg:text-left w-1/2 max-w-sm">
        <h1 class="text-5xl font-bold text-center">Enregistrement</h1>
        <p class="py-6 text-center">Utilisez ce formulaire pour créer un nouveau compte patient.</p>
      </div>
      <div class="card min-w-fit shadow-2xl bg-base-200">
        <form class="card-body" method="post">
          {% csrf_token %}
          <div class="flex lg:flex-row flex-col">
            <div class="mx-10">
              <div class="form-control">
                <label class="label"><span class="label-text">Nom de famille</span></label>
                <input class="input input-bordered" type="text" name="last_name" maxlength="150" required />
              </div>
              <div class="form-control">
                <label class="label"><span class="label-text">Prénom</span></label>
                <input class="input input-bordered" type="text" name="first_name" maxlength="150" required />
              </div>
              <div class="form-control">
                <label class="label"><span class="label-text">Email</span></label>
                <input class="input input-bordered" type="email" name="email" maxlength="254" />
              </div>
            </div>
            <div class="mx-10">
              <div class="form-control">
                <label class="label"><span class="label-text">N° et Rue</span></label>
                <input class="input input-bordered" type="text" name="rue" maxlength="150" required/>
              </div>
              <div class="form-control">
                <label class="label"><span class="label-text">Code postal</span></label>
                {{ form.cp }}
              </div>
              <div class="form-control">
                <label class="label"><span class="label-text">Ville</span></label>
                {{ form.ville }}
              </div>
            </div>
          </div>
          <div class="flex flex-row justify-between mx-10">
            <div class="form-control">
              <label class="label"><span class="label-text">Mot de passe</span></label>
              <input type="password" class="input input-bordered" name="password1" required id="id_password1" />
            </div>
            <div class="form-control">
              <label class="label"><span class="label-text">Confirmation</span></label>
              <input type="password" class="input input-bordered" name="password2" required id="id_password2" />
            </div>
          </div>
          <div class="form-control mt-12">
            <button class="btn btn-accent">Enregistrer</button>
          </div>
          {% if form.errors %}
            <div role="alert" class="alert alert-error mt-5">
              <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span>{{ error_message }}</span>
            </div>
          {% endif %}
        </form>
      </div>
    </div>
  </div>
{% endblock %}
